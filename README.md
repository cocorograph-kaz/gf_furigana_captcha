# GF Furigana Captcha Plugin

![Gravity Forms ロゴ](https://www.gravityforms.com/wp-content/uploads/2020/03/cropped-gravity-forms-logo-1.png)

Gravity Forms向けのふりがな入力専用フィールドプラグイン。姓・名のふりがな入力を安全に管理し、ひらがなのみの入力を強制するバリデーション機能を備えています。

## ✨ 特徴

- **複合フィールド設計**: 姓と名のふりがなを別々の入力欄で収集
- **厳格なバリデーション**: ひらがな以外の文字入力を自動検出
- **Gravity Forms完全統合**: 既存フォームとのシームレスな連携
- **レスポンシブデザイン**: モバイル端末でも最適な表示を実現
- **カスタマイズ可能**: CSSクラスやプレースホルダーを自由に設定

## 📥 インストール方法

1. プラグインZIPファイルをダウンロード
2. WordPress管理画面 > プラグイン > 新規追加 > アップロード
3. ファイルを選択してインストール
4. 有効化後にGravity Formsフォームエディタを開く

または

```bash
wp-content/plugins/ ディレクトリに手動で配置
```

## 🛠 使用方法

1. Gravity Formsで新規フォーム作成/編集
2. フィールド追加メニューから「ふりがな」フィールドを選択
3. フィールド設定で必須項目/プレースホルダーを設定
4. フォームを保存して公開

![フィールド設定画面のスクリーンショット](screenshot-1.png)

## ⚙️ 設定オプション

- **必須項目設定**: 姓・名両方の入力を必須に設定可能
- **プレースホルダーカスタマイズ**: デフォルト「せい」「めい」を変更可能
- **CSSクラス追加**: 独自スタイルを適用可能
- **入力サイズ調整**: small/medium/large から選択

## 🔒 バリデーションルール

- ひらがな（ぁ-ん）のみ許可
- 許可される特殊文字: ゛（濁点）、゜（半濁点）、ー（長音）、〜（波線）、、。（句読点）
- 全角スペース・半角文字を自動拒否

## 🛑 エラーメッセージ

| エラー種類 | 表示メッセージ |
|-----------|---------------|
| 必須項目エラー | 「このフィールドは必須です。次のフィールドに入力してください：せい, めい」 |
| 書式エラー | 「ふりがなは「ひらがな」のみで入力してください」 |

## 🎨 カスタマイズ例

```php
// プレースホルダー変更
add_filter( 'gform_field_content', function( $content, $field ) {
if( $field->type === 'furigana' ) {
return str_replace(
['placeholder="せい"', 'placeholder="めい"'],
['placeholder="名字のふりがな"', 'placeholder="名前のふりがな"'],
$content
);
}
return $content;
}, 10, 2 );
```

## ❓ よくある質問

**Q: フィールドがフォームエディタに表示されません**
A: Gravity Formsが最新バージョンか確認し、プラグインを再アクティベートしてください

**Q: バリデーションが厳しすぎます**
A: 正規表現パターン`$hiragana_pattern`を調整して特殊文字を追加可能

**Q: 入力欄のレイアウトを変更したい**
A: `.ginput_container_furigana`クラスにCSSスタイルを適用

## 📮 サポート

不具合報告・機能要望は以下までご連絡ください：
[info@cocorograph.co](mailto:info@cocorograph.co)
※ エラーメッセージと再現手順を明記してください

## 📜 ライセンス

GPLv3 © 2025 Kazuhiro Nakamura
※ 本プラグインはGravity Formsの公式製品ではありません
